$(document).ready(function(){function e(e){var t=$("#blur").val(),n=$("#saturate").val(),a=$("#hue").val(),i=$("#brightness").val(),r=$("#contrast").val(),l=$("#invert").val(),d=$("#sepia").val(),s="blur("+t+"px) saturate("+n+") hue-rotate("+a+"deg) brightness("+i+") contrast("+r+") invert("+l+") sepia("+d+")";e.css("-webkit-filter",s),$("#blur-val").text(t),$("#saturate-val").text(n),$("#hue-val").text(a),$("#brightness-val").text(i),$("#contrast-val").text(r),$("#invert-val").text(l),$("#sepia-val").text(d)}function t(){window.innerWidth>768&&(document.getElementsByClassName("range-slider__range")[0].min=-2),window.innerWidth<=768&&(document.getElementsByClassName("range-slider__range")[0].min=0),window.innerWidth>656&&(a.width=640,a.videoWidth=640),window.innerWidth<=656&&(a.width=570,a.videoWidth=570),window.innerWidth<=590&&(a.width=470,a.videoWidth=470),window.innerWidth<=500&&(a.width=390,a.videoWidth=390),window.innerWidth<=410&&(a.width=320,a.videoWidth=320)}var n,a=document.getElementById("vid"),i=$("#vid");document.getElementById("rateValueBtn").addEventListener("click",function(){var e=document.getElementsByClassName("range-slider__range")[0].value,t=Number(e).toFixed(1),i=Number(t);e=i,clearInterval(n),e>0?a.playbackRate=e:e<0?n=setInterval(function(){a.playbackRate=1,0==a.currentTime?(clearInterval(n),a.pause()):(a.currentTime+=e/30,console.log(e))},30):a.pause()}),document.getElementsByClassName("range-slider__range")[0].value=0;!function(){var e=$(".range-slider"),t=$(".range-slider__range"),n=$(".range-slider__value");e.each(function(){n.each(function(){var e=$(this).prev().attr("value");$(this).html(e)}),t.on("input",function(){$(this).next(n).html(this.value)})})}(),$(a).on("pause",function(){document.getElementsByClassName("range-slider__range")[0].value<0&&(a.playbackRate=1,clearInterval(n))}),$("#goBack").click(function(){a.currentTime-=5}),window.onload=function(){$("#blur").val(0),$("#saturate").val(1),$("#hue").val(0),$("#brightness").val(.9),$("#contrast").val(1),$("#invert").val(0),$("#sepia").val(0);$("#vid").css("-webkit-filter","blur(0px) saturate(1) hue-rotate(0deg) brightness(0.9) contrast(1) invert(0) sepia(0)"),$("#blur-val").text(0),$("#saturate-val").text(1),$("#hue-val").text(0),$("#brightness-val").text(.9),$("#contrast-val").text(1),$("#invert-val").text(0),$("#sepia-val").text(0)},$("aside input").on("change",function(){e(i)});var r,l,d,s=document.getElementById("canvas"),v=s.getContext("2d");window.addEventListener("resize",t),a.addEventListener("loadedmetadata",function(){t(),console.log(s.width),console.log(s.height),d=a.videoWidth/a.videoHeight,r=a.width-100,l=parseInt(r/d,10),s.width=r,s.height=l,console.log(r),console.log(l)},!1);var o=document.getElementById("snapBtn"),c=document.getElementById("saveBtn");o.addEventListener("click",function(){v.fillRect(0,0,r,l),v.drawImage(a,0,0,r,l),e(s=$(s))}),c.addEventListener("click",function(){var t=$("#saveDiv"),n=$("<canvas></canvas>").attr({width:r,height:l}),a=s[0],i=n[0].getContext("2d");i.fillRect(0,0,r,l),i.drawImage(a,0,0,r,l),e(n);var d=$("<div></div>").css("padding","10px").append(n);t.append(d)})});