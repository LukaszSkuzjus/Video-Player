$(document).ready(function(){function e(e){var t=$("#blur").val(),a=$("#saturate").val(),n=$("#hue").val(),l=$("#brightness").val(),r=$("#contrast").val(),i=$("#invert").val(),v=$("#sepia").val(),s="blur("+t+"px) saturate("+a+") hue-rotate("+n+"deg) brightness("+l+") contrast("+r+") invert("+i+") sepia("+v+")";e.css("-webkit-filter",s),$("#blur-val").text(t),$("#saturate-val").text(a),$("#hue-val").text(n),$("#brightness-val").text(l),$("#contrast-val").text(r),$("#invert-val").text(i),$("#sepia-val").text(v)}var t,a=document.getElementById("vid"),n=$("#vid");document.getElementById("rateValueBtn").addEventListener("click",function(){var e=document.getElementsByClassName("range-slider__range")[0].value,n=Number(e).toFixed(1),l=Number(n);e=l,clearInterval(t),e>0?a.playbackRate=e:e<0?t=setInterval(function(){a.playbackRate=1,0==a.currentTime?(clearInterval(t),a.pause()):(a.currentTime+=e/30,console.log(e))},30):a.pause()}),document.getElementsByClassName("range-slider__range")[0].value=0;!function(){var e=$(".range-slider"),t=$(".range-slider__range"),a=$(".range-slider__value");e.each(function(){a.each(function(){var e=$(this).prev().attr("value");$(this).html(e)}),t.on("input",function(){$(this).next(a).html(this.value),rateValueInput.value=t[0].value})})}(),$(a).on("pause",function(){a.playbackRate=1,clearInterval(t)}),$("#speed").click(function(){a.playbackRate=4}),$("#goBack").click(function(){a.currentTime-=5}),window.onload=function(){$("#blur").val(0),$("#saturate").val(1),$("#hue").val(0),$("#brightness").val(.9),$("#contrast").val(1),$("#invert").val(0),$("#sepia").val(0);$("#vid").css("-webkit-filter","blur(0px) saturate(1) hue-rotate(0deg) brightness(0.9) contrast(1) invert(0) sepia(0)"),$("#blur-val").text(0),$("#saturate-val").text(1),$("#hue-val").text(0),$("#brightness-val").text(.9),$("#contrast-val").text(1),$("#invert-val").text(0),$("#sepia-val").text(0)},$("aside input").on("change",function(){e(n)});var l,r,i,v=document.getElementById("canvas"),s=v.getContext("2d");a.addEventListener("loadedmetadata",function(){i=a.videoWidth/a.videoHeight,l=a.videoWidth-100,r=parseInt(l/i,10),v.width=l,v.height=r},!1);var c=document.getElementById("snapBtn"),u=document.getElementById("saveBtn");c.addEventListener("click",function(){s.fillRect(0,0,l,r),s.drawImage(a,0,0,l,r),e(v=$(v))}),u.addEventListener("click",function(){var t=$("#saveDiv"),a=$("<canvas></canvas>").attr({width:l,height:r}),n=v[0],i=a[0].getContext("2d");i.fillRect(0,0,l,r),i.drawImage(n,0,0,l,r),e(a);var s=$("<div></div>").css("padding","10px").append(a);t.append(s)})});